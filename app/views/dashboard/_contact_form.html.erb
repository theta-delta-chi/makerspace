<%= form_tag "dashboard/update_contacts", :remote => true do %>
  <table class='ui striped table'>
    <thead>
      <tr>
        <th>Name</th>
        <th>Phone</th>
        <th>Remove?</th>
      </tr>
    </thead>
    <tbody>
      <% contacts.each do |contact| %>
        <%= fields_for "contacts[]", contact do |f| %>
        <tr>
          <td><div class='ui small fluid input'><%= f.text_field :name %></div></td>
          <td><div class='ui small fluid input'><%= f.text_field :phone %></div></td>
          <td class='collapsing'>
            <button type='button' class='remove_contact ui small button'>
              Remove
            </button>
          </td>
        </tr>
        <% end %>
      <% end %>
      <%= fields_for "contacts[]", new_contact do |f| %>
        <tr>
          <td><div class='ui small fluid input'><%= f.text_field :name, :class => 'ui input' %></div></td>
          <td><div class='ui small fluid input'><%= f.text_field :phone, :class => 'ui input' %></div></td>
          <td class='collapsing'>
            <button type='button' class='remove_contact ui small button'>
              Remove
            </button>
          </td>
        </tr>
      <% end %>
    </tbody>
    <tfoot>
      <tr>
        <th colspan='3'>
          <button id='add_contact' type='button' class='ui right floated small button'>
            <i class='plus icon'></i>
	  </button>
          <%= submit_tag "Update", class: "ui right floated small primary button" %>
        </th>
      </tr>
    </tfoot>
  </table>
<% end %>
